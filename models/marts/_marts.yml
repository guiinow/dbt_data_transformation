version: 2

models:
  - name: dim_product
    description: Dimension table for products, including category and subcategory information.
    columns:
      - name: product_id
        description: Natural key for the product from the source system.
        tests:
          - unique
          - not_null
      - name: product_name
        description: Name of the product.
        tests:
          - not_null
      - name: productnumber
        description: Product number from the source system.
      - name: product_subcategory_id
        description: Foreign key to product subcategory.
        
      - name: product_subcategory_name
        description: Name of the product subcategory.
      - name: product_category_id
        description: Foreign key to product category.
        tests:
          - relationships:
              arguments:
                to: ref('stg_productcategory')
                field: product_category_id
      - name: product_category_name
        description: Name of the product category.

  - name: fact_sales
    description: Fact table containing sales transaction data.
    columns:
      - name: sales_order_detail_key
        description: Surrogate key for the sales order detail.
        tests:
          - not_null
      - name: sales_order_id
        description: Natural key for the sales order header.
      - name: sales_order_detail_id
        description: Natural key for the sales order detail.
      - name: customer_key
        description: Foreign key to dim_customer.
        tests:
          - relationships:
              arguments:
                to: ref('dim_customer')
                field: customer_key
      - name: product_key
        description: Foreign key to dim_product.
        tests:
          - relationships:
              arguments:
                to: ref('dim_product')
                field: product_key
# ...existing code...
      - name: product_name
        description: Name of the product sold.
      - name: order_date
        description: Date of the sales order.
      - name: order_quantity
        description: Quantity of the product ordered.
      - name: unit_price
        description: Unit price of the product at the time of order.
      - name: unit_price_discount
        description: Discount applied to the unit price.
      - name: gross_amount
        description: Calculated gross amount (quantity * unit price).
      - name: net_amount
        description: Calculated net amount (gross amount * (1 - discount)).
      - name: territory_name
        description: Name of the sales territory.
      - name: country_region_code
        description: Country region code of the sales territory.
      - name: sales_ytd
        description: Sales year to date for the territory.
      - name: sales_last_year
        description: Sales last year for the territory.
